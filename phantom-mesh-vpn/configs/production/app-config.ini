# Production Configuration for PhantomMesh VPN
# Phase P1-006: Production Deployment

[automation]
# Threat Assessment Configuration
threat_assessment_enabled = true
risk_threshold_critical = 9.0
risk_threshold_high = 7.0
risk_threshold_medium = 4.0
risk_threshold_low = 0.0
confidence_min = 0.70
confidence_factors = 4
max_assessment_latency_ms = 50

# Alert Routing Configuration
alert_routing_enabled = true
alert_channels = ["slack", "pagerduty", "email", "sms", "teams", "discord"]
escalation_timeout_minutes = 60
max_retries = 3
alert_deduplication_window_seconds = 300

# Auto-Remediation Configuration
auto_remediation_enabled = true
remediation_risk_threshold = 7.0
remediation_dry_run = false
remediation_actions = ["firewall_rule", "rate_limit", "quarantine", "isolation", "blocking", "tunnel_adjust"]
max_concurrent_remediations = 50
remediation_timeout_seconds = 300
auto_rollback_after_seconds = 3600

# Incident Response Configuration
incident_response_enabled = true
auto_incident_creation = true
forensic_evidence_types = ["traffic_logs", "system_metrics", "event_logs", "configuration", "state_snapshot", "threat_details"]
auto_report_generation = true
incident_response_timeout_seconds = 1000

# ML Training Configuration
ml_training_enabled = true
ml_training_schedule = "0 0 * * *"  # Daily at midnight UTC
ml_min_samples = 1000
ml_eval_threshold = 0.85
ml_max_training_time_minutes = 30
ml_model_version_retention = 5
ml_inference_timeout_ms = 10

# System Configuration
event_queue_size = 50000
event_deduplication_window_seconds = 300
max_concurrent_workflows = 500
worker_threads = 32
system_availability_target = 99.99
max_workflow_execution_time_seconds = 3600

[database]
# PostgreSQL Configuration for Production
host = "phantom-postgres.phantom-mesh.svc.cluster.local"
port = 5432
database = "phantom_mesh_prod"
user = "phantom_prod_user"
password_secret = "phantom-db-secret"
pool_size = 100
max_overflow = 50
pool_timeout = 30
pool_recycle = 3600
echo = false
connect_timeout = 10

# Connection pool tuning
min_cached_statement_lifetime = 300
max_cached_statement_lifetime = 3600
statement_cache_size = 500

[redis]
# Redis Cache Configuration
host = "phantom-redis.phantom-mesh.svc.cluster.local"
port = 6379
db = 0
password_secret = "phantom-redis-secret"
max_connections = 100
connection_pool_size = 50
socket_timeout = 5
socket_keepalive = true
connection_timeout = 5
encoding = "utf-8"

# Cache TTL settings (seconds)
threat_assessment_cache_ttl = 300
alert_route_cache_ttl = 600
ml_model_cache_ttl = 86400
remediation_action_cache_ttl = 300

[security]
# TLS/SSL Configuration
tls_enabled = true
tls_cert_path = "/etc/phantom/tls/tls.crt"
tls_key_path = "/etc/phantom/tls/tls.key"
tls_min_version = "1.3"
tls_cipher_suites = ["TLS_CHACHA20_POLY1305_SHA256", "TLS_AES_256_GCM_SHA384"]
tls_verify_client = true

# API Security
api_key_required = true
api_key_header = "X-API-Key"
rate_limit_per_minute = 10000
rate_limit_per_second = 500
jwt_enabled = true
jwt_secret_key_path = "/etc/phantom/secrets/jwt-key"
jwt_algorithm = "HS256"
jwt_expiration_hours = 24

# Authentication
auth_required = true
oauth_enabled = true
oauth_provider = "https://oauth-provider.example.com"
oauth_client_id_secret = "phantom-oauth-secret"

# Authorization
rbac_enabled = true
rbac_config_path = "/etc/phantom/rbac-rules.yaml"

[logging]
# Logging Configuration
log_level = "INFO"
log_format = "json"
log_output = "stdout,file"
log_file_path = "/var/log/phantom/phantom-mesh.log"
log_file_max_size_mb = 100
log_file_backup_count = 10
log_file_compression = true
correlation_id_enabled = true
request_logging_enabled = true
response_logging_enabled = false  # Don't log sensitive response data
slow_query_threshold_ms = 100
slow_request_threshold_ms = 500

[monitoring]
# Prometheus Metrics
prometheus_enabled = true
prometheus_port = 9090
prometheus_path = "/metrics"
prometheus_scrape_interval = 15
enable_go_metrics = true
enable_process_metrics = true

# Metrics retention
metrics_retention_days = 15
sample_limit = 5000000

# Alerting
alerting_enabled = true
alert_evaluation_interval = 30  # seconds
alert_history_size = 1000

[performance]
# Performance Tuning
max_request_size_mb = 10
max_response_size_mb = 100
request_timeout_seconds = 30
response_timeout_seconds = 30
idle_timeout_seconds = 120
keep_alive_timeout_seconds = 90
max_connections = 10000
max_idle_connections = 1000
connection_max_lifetime_seconds = 300

# Caching
enable_request_caching = true
cache_hit_threshold = 0.8
enable_compression = true
compression_threshold_bytes = 1024
compression_level = 6

[backup]
# Backup Configuration
backup_enabled = true
backup_schedule = "0 2 * * *"  # 2 AM daily UTC
backup_retention_days = 30
backup_location = "s3://phantom-mesh-backups"
backup_encryption = true
backup_encryption_key_secret = "phantom-backup-key"
backup_verification = true
backup_timeout_minutes = 60
incremental_backup = true

[monitoring.exporters]
# Export configuration to external systems
datadog_enabled = false
datadog_api_key_secret = "phantom-datadog-key"
newrelic_enabled = false
newrelic_api_key_secret = "phantom-newrelic-key"
splunk_enabled = true
splunk_endpoint = "https://splunk.example.com:8088"
splunk_token_secret = "phantom-splunk-token"
sumologic_enabled = false

[network]
# Network Configuration
ipv4_enabled = true
ipv6_enabled = true
dns_resolver = "8.8.8.8,8.8.4.4"
dns_cache_ttl = 300
load_balancer_type = "round-robin"
enable_circuit_breaker = true
circuit_breaker_threshold = 5
circuit_breaker_timeout = 60
circuit_breaker_reset_timeout = 300

[deployment]
# Deployment Configuration
environment = "production"
region = "us-east-1"
availability_zones = ["us-east-1a", "us-east-1b", "us-east-1c"]
multi_az_enabled = true
multi_region_enabled = false
blue_green_deployment = true
canary_deployment = true
canary_percentage = 10
canary_duration_minutes = 30

[features]
# Feature Flags
enable_threat_assessment = true
enable_alert_routing = true
enable_auto_remediation = true
enable_incident_response = true
enable_ml_training = true
enable_feedback_loop = true
enable_health_monitoring = true
enable_audit_logging = true
enable_cost_tracking = true
enable_experimental_features = false

[compliance]
# Compliance Configuration
gdpr_enabled = true
hipaa_enabled = false
pci_dss_enabled = false
sox_enabled = false
audit_logging_enabled = true
audit_log_retention_days = 2555  # 7 years
data_retention_days = 365
encrypt_data_at_rest = true
encrypt_data_in_transit = true
